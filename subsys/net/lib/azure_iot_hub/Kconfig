#
# Copyright (c) 2020 Nordic Semiconductor
#
# SPDX-License-Identifier: LicenseRef-BSD-5-Clause-Nordic
#

menuconfig AZURE_IOT_HUB
	bool "Azure IoT Hub"
	select MQTT_LIB
	select MQTT_LIB_TLS

if AZURE_IOT_HUB

config AZURE_IOT_HUB_NAME
	string "Azure IoT Hub name"

config AZURE_IOT_HUB_NAME_MAX_LEN
	int "Max length for Azure IoT Hub name"
	default 30

config AZURE_IOT_HUB_STATIC_IPV4
	bool "Enable use of static IPv4"

config AZURE_IOT_HUB_STATIC_IPV4_ADDR
	string "Static IPv4 address"
	depends on AZURE_IOT_HUB_STATIC_IPV4

config AZURE_IOT_HUB_SEC_TAG
	int "Security tag where TLS credentials are stored"

config AZURE_IOT_HUB_HOSTNAME
	string "Azure IoT Hub hostname"

config AZURE_IOT_HUB_PORT
	int "Azure IoT Hub port"
	default 8883

config AZURE_IOT_HUB_MQTT_RX_TX_BUFFER_LEN
	int "Buffer sizes for the MQTT library"
	default 256
	help
	  Specifies maximum message size can be transmitted/received through
	  MQTT (exluding MQTT PUBLISH payload).

config AZURE_IOT_HUB_MQTT_PAYLOAD_BUFFER_LEN
	int "Size of the MQTT PUBLISH payload buffer (receiving MQTT messages)."
	default 1024

config AZURE_IOT_HUB_DEVICE_ID_MAX_LEN
	int "Maximum length of device ID"
	default 30

config AZURE_IOT_HUB_DEVICE_ID
	string "Provide device ID compile time"

config AZURE_IOT_HUB_DEVICE_ID_APP
	bool "Device ID provided by application run-time"

config AZURE_IOT_HUB_CONNECTION_POLL_THREAD
	bool "Poll Azure Iot Hub socket in separate thread"
	default y

config AZURE_IOT_HUB_AUTO_DEVICE_TWIN_REQUEST
	bool "Request device automatically when connected"
	default y

config AZURE_IOT_HUB_DPS
	bool "Use Device Provisioning Service"
	select CJSON_LIB
	depends on SETTINGS
	help
	  Enabling DPS will make the device connect to the specified DPS
	  endpoint and retrieve the IoT Hub endpoint to use for telemetry.

if AZURE_IOT_HUB_DPS

config AZURE_IOT_HUB_DPS_ID_SCOPE
	string "DPS ID scope"

config AZURE_IOT_HUB_DPS_REG_ID
	string "DPS registration ID"

config AZURE_IOT_HUB_DPS_HOSTNAME
	string "DPS host name"
	default "global.azure-devices-provisioning.net"

endif # AZURE_IOT_HUB_DPS

module=AZURE_IOT_HUB
module-dep=LOG
module-str=Azure IoT Hub
source "${ZEPHYR_BASE}/subsys/logging/Kconfig.template.log_config"

endif # AZURE_IOT_HUB
